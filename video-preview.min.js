function vpInjectCSS() {
	var s = document.createElement('style');
	s.innerHTML = ".video-preview-container{display:inline-block;position:relative}.video-preview-container video{display:block}.video-preview-container .controls{position:absolute;top:0;left:0;width:100%;height:calc(100% + 4px);display:flex;flex-direction:column}.video-preview-container .controls .progress{margin-top:auto;display:flex;height:4px;background:#ccc}.video-preview-container .controls .progress-bar{width:0%;height:100%;background-color:black}.video-preview-container .controls .play-button{display:flex;flex-direction:column;justify-content:center;position:absolute;right:15px;bottom:15px;height:25px;width:25px;border:2px solid rgb(200,200,200);border-radius:50%;animation:2s infinite alternate preview-video-player-button-blink}.video-preview-container .controls .play-button::after{flex-basis:1;text-align:center;margin-left:2px;content:'â–¶';font-family:arial!important;font-size:15px;line-height:15px;color:rgb(200,200,200);animation:2s infinite alternate preview-video-player-button-blink}@keyframes preview-video-player-button-blink{0%{border-color:rgba(200,200,200,1);color:rgba(200,200,200,1)}100%{border-color:rgba(200,200,200,.5);color:rgba(200,200,200,.5)}}.video-preview-container.playing .play-button{transition:.5s opacity;opacity:0}";
	document.head.appendChild(s);
}

function initVideoPreview(e){"function"==typeof vpInjectCSS&&vpInjectCSS(),document.querySelectorAll(e).forEach(function(n){var r=document.createElement("video");r.innerHTML=n.innerHTML,r._playing=!1;var t={loop:1,muted:1,playsinline:1,controls:0};Object.keys(t).forEach(function(e){t[e]?r.setAttribute(e,t[e]):r.removeAttribute(e)}),["width","height","class"].forEach(function(e){var t=n.getAttribute(e);t&&r.setAttribute(e,t)});var e=document.createElement("div");e.classList.add("controls"),e.innerHTML="<div class=progress> <span class=progress-bar></span></div><div class=play-button></div>";var i=document.createElement("div");i.classList.add("video-preview-container"),i.appendChild(r),i.appendChild(e),n.parentNode.replaceChild(i,n);var a=i.querySelector(".controls .progress-bar");return r._updateProgress=function(){a.style.width=Math.floor(r.currentTime/r.duration*100)+"%"},r._play=function(){r.play(),r._playing=!0,i.classList.add("playing")},r._stop=function(){r.pause(),r.currentTime=0,r._playing=!1,i.classList.remove("playing")},r._togglePlay=function(){r._playing?r._stop():r._play()},i.addEventListener("mouseover",r._play),i.addEventListener("mouseout",r._stop),i.addEventListener("click",r._togglePlay),r.addEventListener("timeupdate",r._updateProgress),i})}

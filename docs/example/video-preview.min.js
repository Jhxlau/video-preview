function vpInjectCSS() {
	var s = document.createElement('style');
	s.innerHTML = ".video-preview-container{display:inline-block;position:relative}.video-preview-container video{display:block}.video-preview-container .controls{position:absolute;top:0;left:0;width:100%;height:calc(100% + 4px);display:flex;flex-direction:column}.video-preview-container .controls .progress{margin-top:auto;display:flex;height:4px;background:#ccc}.video-preview-container .controls .progress-bar{width:0%;height:100%;background-color:#000}.video-preview-container .controls .play-button{display:flex;flex-direction:column;justify-content:center;position:absolute;right:15px;bottom:15px;height:25px;width:25px;border:2px solid #c8c8c8;border-radius:50%;animation:2s infinite alternate preview-video-player-button-blink}.video-preview-container .controls .play-button::after{flex-basis:1;text-align:center;margin-left:2px;content:'â–¶';font-family:arial!important;font-size:15px;line-height:15px;color:#c8c8c8;animation:2s infinite alternate preview-video-player-button-blink}@keyframes preview-video-player-button-blink{0%{border-color:rgba(200,200,200,1);color:rgba(200,200,200,1)}100%{border-color:rgba(200,200,200,.5);color:rgba(200,200,200,.5)}}.video-preview-container.playing .play-button{transition:.5s opacity;opacity:0}.video-preview-container.loading{cursor:wait}";
	document.head.appendChild(s);
}

function initVideoPreview(t,r){r=Object.assign({cors:!1,loop:!0,muted:!0,preload:"auto",autoplay:!1},r),"function"==typeof vpInjectCSS&&vpInjectCSS(),document.querySelectorAll(t).forEach(function(n){var o=document.createElement("video");o.innerHTML=n.innerHTML,o._playing=!1;var e={loop:r.loop,muted:r.muted,crossorigin:r.cors,playsinline:1,controls:0};Object.keys(e).forEach(function(t){e[t]?o.setAttribute(t,e[t]):o.removeAttribute(t)}),["width","height","class"].forEach(function(t){var e=n.getAttribute(t);e&&o.setAttribute(t,e)});var t=document.createElement("div");t.classList.add("controls"),t.innerHTML="<div class=progress> <span class=progress-bar></span></div><div class=play-button></div>";var a=document.createElement("div");a.classList.add("video-preview-container"),a.appendChild(o),a.appendChild(t),n.parentNode.replaceChild(a,n);var i=a.querySelector(".controls .progress-bar");return o._updateProgress=function(){i.style.width=Math.floor(o.currentTime/o.duration*100)+"%"},o._play=function(){var t=function(){o._playing=!0,a.classList.add("playing")},e=o.play();e&&"function"==typeof e.then?e.then(t).catch(function(t){console.warn("state?",o.readyState),setTimeout(o._play,100)}):t()},o._stop=function(){var t=function(){o.currentTime=0,o._playing=!1,a.classList.remove("playing")},e=o.pause();e&&"function"==typeof e.then?e.then(t):t()},o._togglePlay=function(){o._playing?o._stop():o._play()},o._toggleLoadingState=function(t){return(o._loading=t)?a.classList.add("loading"):a.classList.remove("loading")},o._toggleLoadingState(!0),a.addEventListener("mouseover",o._play),a.addEventListener("mouseout",o._stop),a.addEventListener("click",o._togglePlay),o.addEventListener("timeupdate",o._updateProgress),o.addEventListener("canplaythrough",function(){o._toggleLoadingState(!1)}),a})}
